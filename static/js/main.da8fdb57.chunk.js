(window.webpackJsonpwaves=window.webpackJsonpwaves||[]).push([[0],{123:function(e,t,a){e.exports={cards:"Cards_cards__314Rx"}},136:function(e,t){},233:function(e,t,a){e.exports={section:"Section_section__Ap5Zy"}},252:function(e,t,a){e.exports=a(491)},257:function(e,t,a){},47:function(e,t,a){e.exports={card:"Card_card__1eE8R",add:"Card_add__1pgKF",title:"Card_title__2pVhP",attributes:"Card_attributes__16E1C"}},491:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(8),i=a.n(c),o=(a(257),a(33)),l=a(499),s=a(25),u=a(18),m=a.n(u),p=a(250),d=a(27),f=(a(130),Math.pow(10,8));function v(e){return fetch(e).then(function(e){return e.json()})}var b="3MvoQ3q8wFnquWFPSZuBGunTnE1fphumBxd",E="https://nodes-testnet.wavesnodes.com";function h(e){return"".concat(E,"/").concat(e)}function y(e){return h("addresses/data/".concat(b,"?matches=").concat(e))}function g(){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(m.a.mark(function e(){var t,a,n,r,c=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:".*",e.next=3,v(y(t+"_organizer"));case 3:for(a=e.sent,n=[],r=0;r<a.length;r++)n.push.apply(n,Object(p.a)(a[r].value.trim().split(" ")));return e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e){return O.apply(this,arguments)}function O(){return(O=Object(d.a)(m.a.mark(function e(t){var a,n,r,c,i;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(y(t+"_.*"));case 2:for(a=e.sent,n={id:a[0].key.split("_")[0]},r=0;r<a.length;r++)c=a[r].key.substr(a[r].key.indexOf("_")+1),i=a[r].value,n[c]=i;return e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(){return(j=Object(d.a)(m.a.mark(function e(t){var a,n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:return a=e.sent,n=a.map(function(e){return k(e)}),e.next=6,Promise.all(n);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e,t){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(m.a.mark(function e(t,a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={type:3,data:{name:t.name,description:t.imageUrl,quantity:1,precision:0,reissuable:!1,fee:{tokens:"0.001",assetId:"WAVES"}}},e.abrupt("return",a(n).then(JSON.parse));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(e,t){return I.apply(this,arguments)}function I(){return(I=Object(d.a)(m.a.mark(function e(t,a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.startPrice>=t.deposit)){e.next=2;break}throw new Error("start price should be >= deposit");case 2:return n={type:16,data:{fee:{tokens:.005*f,assetId:"WAVES"},dappAddress:b,call:{function:"startAuction",args:[{type:"integer",value:t.duration},{type:"integer",value:t.startPrice},{type:"string",value:t.priceAssetId||"WAVES"},{type:"integer",value:t.deposit}]},payment:[{tokens:1,assetId:t.assetId}]}},e.abrupt("return",a(n).then(JSON.parse));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var A=function(e){WavesKeeper.initialPromise.then(function(t){e(t)})},P=a(496),C=a(493),T=a(232);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function L(e){return[{id:"TAyRZ8XwQ5HYTkZUrTkMFb4oG43UMkCmB3wT5zdj6nL",closing_start:636270,deposit:2e5,lot_amount:1,lot_assetId:"DfevR4SncDEzCcq2Wnsb2ftPJHhQ9G7A55jPa9kse8eB",organizer:"3MvxXxJcuELB2UaCHKVQaUszu8u3NmXxoWr",priceAssetId:"WAVES",reveal_start:626190,second_price:0,settle:!1,startPrice:1e5,top_price:0,unrevealed_count:0},{id:"2BLQ7ZFsBNk6t32dPXtyYXxmYon815sfa1V82Lk2cSQ7",closing_start:636274,deposit:2e5,lot_amount:1,lot_assetId:"Z37nfqZnoAziZrRkS1JPuAbSXVegkY6cRAkPNaLVYKd",organizer:"3MvxXxJcuELB2UaCHKVQaUszu8u3NmXxoWr",priceAssetId:"WAVES",reveal_start:626194,second_price:0,settle:!1,startPrice:1e5,top_price:0,unrevealed_count:0},{id:"dL6PtY2srkaXcoXY5RnZSrDgw7KBqp5iNVnJtwVPBGo",closing_start:639813,deposit:2e5,lot_amount:1,lot_assetId:"8rwEzFBYzReR3csc5PvpjTdcj5uPddtkuDxB2tUx2wno",organizer:"3MvxXxJcuELB2UaCHKVQaUszu8u3NmXxoWr",priceAssetId:"WAVES",reveal_start:629733,second_price:0,settle:!1,startPrice:1e5,top_price:0,unrevealed_count:0}].map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach(function(t){Object(T.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{auctionId:e.id,hash:"hashhashhashhashhashhashhashhash",priceAssetId:"WAVES",deposit:1e3})})}var N=a(233),U=a.n(N),V=function(e){var t=e.children;return r.a.createElement("div",{className:U.a.section},t)},W=[{title:"Auction ID",dataIndex:"auctionId"},{title:"Start price",dataIndex:"startPrice"},{title:"Deposit",dataIndex:"deposit"}],F=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)(function(){var e=L();c(e)},[]),r.a.createElement(V,null,r.a.createElement(P.a.Title,{level:1},"My bids"),r.a.createElement(C.a,{columns:W,dataSource:a,pagination:!1,rowKey:"auctionId"}))},R=a(9),B=a(90),D=a.n(B);function K(e){return"https://placekitten.com/800/400?image="+e.id.split("").reduce(function(e,t){return e+t.charCodeAt(0)},0)%15}var X=a(47),Z=a.n(X),M=function(e){var t=e.item;return r.a.createElement("div",{className:Z.a.card,onClick:function(){return Object(s.navigate)("/waves/auction/".concat(t.id))}},r.a.createElement("img",{src:K(t),alt:""}),r.a.createElement(P.a.Title,{className:Z.a.title,level:4},t.id),r.a.createElement("div",{className:Z.a.attributes},r.a.createElement("div",null,r.a.createElement(R.a,{type:"user"})," ",t.organizer),r.a.createElement("div",null,r.a.createElement(R.a,{type:"clock-circle"})," Ends ",D()().to(0)),r.a.createElement("div",null,r.a.createElement(R.a,{type:"money-collect"})," ",t.startPrice," Waves"),r.a.createElement("div",null,r.a.createElement(R.a,{type:"number"})," ",t.unrevealed_count," bids")))},Y=function(e){return r.a.createElement("div",Object.assign({className:"".concat(Z.a.card," ").concat(Z.a.add)},e),r.a.createElement(R.a,{type:"plus"}))},J=a(123),H=a.n(J),Q=function(e){var t=e.auctions;return r.a.createElement("div",{className:H.a.cards},r.a.createElement(Y,{onClick:function(){return Object(s.navigate)("/waves/create/lot")},title:"Create a new lot"}),t.map(function(e){return r.a.createElement(M,{key:e.id,item:e})}))},q=function(e){var t=e.lot;return r.a.createElement("div",{className:Z.a.card,onClick:function(){return Object(s.navigate)("/waves/lot/".concat(t.id))}},r.a.createElement("img",{src:t.imageUrl,alt:""}),r.a.createElement(P.a.Title,{className:Z.a.title,level:4},t.name))},G=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)(function(){c([{id:"Z37nfqZnoAziZrRkS1JPuAbSXVegkY6cRAkPNaLVYKd",name:"Lot number 1",imageUrl:"https://placekitten.com/800/400?image=10"},{id:"8rwEzFBYzReR3csc5PvpjTdcj5uPddtkuDxB2tUx2wno",name:"Lot number 2",imageUrl:"https://placekitten.com/800/400?image=1"}])},[]),r.a.createElement("div",{className:H.a.cards},r.a.createElement(Y,{onClick:function(){return Object(s.navigate)("/waves/create/lot")},title:"Create a new lot"}),a.map(function(e){return r.a.createElement(q,{key:e.id,lot:e})}))},$=a(124),ee=a(125),te=a(127),ae=a(126),ne=a(128),re=a(95),ce=a(495),ie=a(60),oe=a(497),le=re.a.Option,se=function(e){function t(){var e,a;Object($.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(te.a)(this,(e=Object(ae.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||(console.log("Received values of form: ",t),A(function(){var e=Object(d.a)(m.a.mark(function e(a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x({assetId:"",duration:t["select-lot"],startPrice:t["input-number-start-price"],priceAssetId:"WAVES",deposit:t["input-number-deposit"]},a.signAndPublishTransaction);case 2:n=e.sent,console.info("Created asset: "+n.id+" waiting for tx");case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()))})},a.normFile=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},a}return Object(ne.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(V,null,r.a.createElement(P.a.Title,null,"Creating an auction"),r.a.createElement(ce.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{onSubmit:this.handleSubmit}),r.a.createElement(ce.a.Item,{label:"Lot",hasFeedback:!0},e("select-lot",{})(r.a.createElement(re.a,null,r.a.createElement(le,{value:"1"},"1"))),r.a.createElement(ie.a,{onClick:function(){return Object(s.navigate)("/waves/create/lot")}},"Create Lot")),r.a.createElement(ce.a.Item,{label:"Duration"},e("duration",{})(r.a.createElement(oe.a,{step:1}))),r.a.createElement(ce.a.Item,{label:"Start price"},e("input-number-start-price",{})(r.a.createElement(oe.a,{step:.01}))),r.a.createElement(ce.a.Item,{label:"Deposit"},e("input-number-deposit",{})(r.a.createElement(oe.a,{step:.01}))),r.a.createElement(ce.a.Item,{wrapperCol:{span:12,offset:6}},r.a.createElement(ie.a,{type:"primary",htmlType:"submit"},"Save auction"))))}}]),t}(r.a.Component),ue=ce.a.create({name:"validate_other"})(se),me=a(498),pe=a(494),de=function(e){function t(){var e,a;Object($.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(te.a)(this,(e=Object(ae.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||(console.log("Received values of form: ",t),A(function(){var e=Object(d.a)(m.a.mark(function e(a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_({name:t["input-name"],imageUrl:t.upload[0].response.url},a.signAndPublishTransaction);case 2:n=e.sent,console.info("Created asset: "+n.id+" waiting for tx");case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()))})},a.normFile=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},a}return Object(ne.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(V,null,r.a.createElement(P.a.Title,null,"Creating a Lot"),r.a.createElement(ce.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{onSubmit:this.handleSubmit}),r.a.createElement(ce.a.Item,{label:"Lot name"},e("input-name",{})(r.a.createElement(me.a,null))),r.a.createElement(ce.a.Item,{label:"Image for lot"},e("upload",{valuePropName:"fileList",getValueFromEvent:this.normFile})(r.a.createElement(pe.a,{name:"image",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",accept:"image/*"},r.a.createElement(ie.a,null,r.a.createElement(R.a,{type:"upload"})," Click to upload")))),r.a.createElement(ce.a.Item,{wrapperCol:{span:12,offset:6}},r.a.createElement(ie.a,{type:"primary",htmlType:"submit"},"Save Lot"))))}}]),t}(r.a.Component),fe=ce.a.create({name:"validate_other"})(de),ve=[{title:"key",dataIndex:"key"},{title:"value",dataIndex:"value"}],be=function(e){var t=e.item,a={"Auction id ":t.id,"Max bid ":t.deposit,"Amount ":t.lot_amount,"Lot id ":t.lot_assetId,"Organizer address ":t.organizer,"Currency ":t.priceAssetId,"Start bid ":t.startPrice,"Time left for bids ":"@TODO","Second price":t.second_price?t.second_price:"Will be known after time left for bids complete","Top price ":t.top_price?t.top_price:"Will be known after time left for bids completed","Unrevealed count":t.unrevealed_count?t.unrevealed_count:"Will be known after time left for bids completed","Time left for reveal bids":"@TODO closing_start - today",Settle:t.settle?"Winner took the prize":"The prize is held by the organizer"},n=Object.entries(a).map(function(e){var t=Object(o.a)(e,2);return{key:t[0],value:t[1]}});return r.a.createElement(C.a,{columns:ve,dataSource:n,pagination:!1,showHeader:!1})},Ee=function(e){var t=e.auction,a=e.state,c=Object(n.useState)(0),i=Object(o.a)(c,2),l=i[0],s=i[1];return void 0===t?r.a.createElement(r.a.Fragment,null,"Auction not found"):r.a.createElement(V,null,r.a.createElement(P.a.Title,{level:1},t.id),r.a.createElement("img",{src:K(t),alt:""}),r.a.createElement(be,{item:t}),r.a.createElement("br",null),r.a.createElement("br",null),a.account.address===t.organizer?r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,{type:"primary"},"SETTLE")):r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a,{value:l,min:0,formatter:function(e){return e?(+e/100).toFixed(2):""},parser:function(e){return e?100*parseFloat(e):0},onChange:function(e){return e&&s(e)}})," ",r.a.createElement(ie.a,{type:"primary"},"Bid")))},he=function(e){var t=e.id,a=Object(n.useState)(),c=Object(o.a)(a,2),i=c[0],l=c[1];return Object(n.useEffect)(function(){l([{id:"Z37nfqZnoAziZrRkS1JPuAbSXVegkY6cRAkPNaLVYKd",name:"Lot number 1",imageUrl:"https://placekitten.com/800/400?image=10"},{id:"8rwEzFBYzReR3csc5PvpjTdcj5uPddtkuDxB2tUx2wno",name:"Lot number 2",imageUrl:"https://placekitten.com/800/400?image=1"}].find(function(e){return e.id===t}))},[t]),void 0===i?r.a.createElement(r.a.Fragment,null,"Lot not found"):r.a.createElement(V,null,r.a.createElement(P.a.Title,{level:1},i.name),r.a.createElement("img",{src:i.imageUrl,alt:""}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ie.a,{onClick:function(){return Object(s.navigate)("/waves/create/auction")},type:"primary"},"Send to auction"))},ye=a(492),ge=a(169),we=function(e){var t,a=e.state,n=Object(s.usePath)();return r.a.createElement(ye.a.Header,null,r.a.createElement("div",{style:{float:"left",color:"white",marginRight:20}},"WAVES BIDS"),r.a.createElement(ge.a,{theme:"dark",mode:"horizontal",selectedKeys:[n],style:{lineHeight:"64px"},onClick:function(e){Object(s.navigate)(e.key)}},r.a.createElement(ge.a.Item,{key:"/waves/"},"All auctions"),r.a.createElement(ge.a.SubMenu,{title:"Create"},r.a.createElement(ge.a.Item,{key:"/waves/create/lot"},"Create lot"),r.a.createElement(ge.a.Item,{key:"/waves/create/auction"},"Create auction")),r.a.createElement(ge.a.SubMenu,{title:r.a.createElement("span",{className:"submenu-title-wrapper"},r.a.createElement(R.a,{type:"user"}),a&&a.account&&a.account.name||"NOT AUTHORIZED"),style:{float:"right"}},r.a.createElement(ge.a.Item,{key:"/waves/auctions"},"My auctions"),r.a.createElement(ge.a.Item,{key:"/waves/bids"},"My bids"),r.a.createElement(ge.a.Item,{key:"/waves/lots"},"My lots"),r.a.createElement(ge.a.ItemGroup,{title:"Info"},r.a.createElement(ge.a.Item,{disabled:!0,key:"adress"},a&&a.account&&a.account.address),r.a.createElement(ge.a.Item,{disabled:!0,key:"balance-available"},"Balance:"," ",a&&a.account&&(t=a.account.balance.available,(parseInt(""+t)/f).toString())," ","WAVES"),r.a.createElement(ge.a.Item,{disabled:!0,key:"network"},"Network: ",a&&a.account&&a.account.network)))))},ke=function(e){var t=e.children,a=e.state;return r.a.createElement(ye.a,{className:"layout"},r.a.createElement(we,{state:a}),r.a.createElement(ye.a.Content,null,t),r.a.createElement(ye.a.Footer,null))},Oe=function(){Object(s.useRedirect)("/","/waves/");var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(),u=Object(o.a)(i,2),m=u[0],p=u[1];Object(n.useEffect)(function(){new Promise(function(e,t){window.onload=function(){if("undefined"===typeof WavesKeeper)return t("Keeper is not installed!");WavesKeeper.initialPromise.then(function(t){t.publicState().then(function(t){console.log({state:t}),e(t)})})}}).then(function(e){c(e)}).catch(function(e){l.a.error({message:e,description:"You need to install and configure Waves Keeper chrome extension in order to use this site!"})})},[]),Object(n.useEffect)(function(){(function(e){return j.apply(this,arguments)})("3MvxXxJcuELB2UaCHKVQaUszu8u3NmXxoWr").then(function(e){p(e)})},[]);var d={"/waves/":function(){return r.a.createElement(Q,{auctions:m||[]})},"/waves/auctions":function(){return r.a.createElement(Q,{auctions:m||[]})},"/waves/lots":function(){return r.a.createElement(G,null)},"/waves/bids":function(){return r.a.createElement(F,null)},"/waves/create/lot":function(){return r.a.createElement(fe,null)},"/waves/create/auction":function(){return r.a.createElement(ue,null)},"/waves/auction/:id":function(e){var t=e.id;return m&&r.a.createElement(Ee,{state:a,auction:m.find(function(e){return e.id===t})})},"/waves/lot/:id":function(e){var t=e.id;return r.a.createElement(he,{id:t})}},f=Object(s.useRoutes)(d);return r.a.createElement(ke,{state:a},f||"404. Page not found")};i.a.render(r.a.createElement(Oe,null),document.getElementById("root"))}},[[252,1,2]]]);
//# sourceMappingURL=main.da8fdb57.chunk.js.map