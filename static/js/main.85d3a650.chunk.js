(window.webpackJsonpwaves=window.webpackJsonpwaves||[]).push([[0],{122:function(e,t,n){e.exports={cards:"Cards_cards__314Rx"}},135:function(e,t){},234:function(e,t,n){e.exports={section:"Section_section__Ap5Zy"}},252:function(e,t,n){e.exports=n(491)},257:function(e,t,n){},47:function(e,t,n){e.exports={card:"Card_card__1eE8R",add:"Card_add__1pgKF",title:"Card_title__2pVhP",attributes:"Card_attributes__16E1C"}},491:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(8),i=n.n(c),o=(n(257),n(27)),u=n(499),s=n(25),l=n(233),p=n(170),f=n(10),d=n.n(f),m=n(18),v=n(129);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E=Math.pow(10,8);function y(e){return fetch(e).then(function(e){return e.json()})}function g(e){return fetch(e).then(function(e){return e.json()})}var w="3Mp5kngPzoQNMy98TMqPtZ36m43ijrKbhan",O="https://nodes-testnet.wavesnodes.com";function j(e){return(parseInt(""+e)/E).toString()}function k(e){return"".concat(O,"/").concat(e)}function S(e){return k("addresses/data/".concat(w,"?matches=").concat(e))}function I(){return x.apply(this,arguments)}function x(){return(x=Object(m.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g(k("blocks/height")).then(function(e){return e.height}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(){return C.apply(this,arguments)}function C(){return(C=Object(m.a)(d.a.mark(function e(){var t,n,a,r,c=arguments;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"[A-Za-z0-9]{35}",e.next=3,y(S(t+"_organizer"));case 3:for(n=e.sent,a=[],r=0;r<n.length;r++)a.push.apply(a,Object(p.a)(n[r].value.trim().split(" ").filter(function(e){return""!==e})));return e.abrupt("return",a);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e){return T.apply(this,arguments)}function T(){return(T=Object(m.a)(d.a.mark(function e(t){var n,a,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(S(t+"_bidder"));case 2:for(n=e.sent,a=[],r=0;r<n.length;r++)a.push.apply(a,Object(p.a)(n[r].value.trim().split(" ").filter(function(e){return""!==e})));return e.abrupt("return",a);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(e){return R.apply(this,arguments)}function R(){return(R=Object(m.a)(d.a.mark(function e(t){var n,a,r,c,i,o,u,s,l,p,f,m;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(S(t+"_.*"));case 2:return n=e.sent,e.next=5,y(S(t+"[A-Za-z0-9]{35}_.*"));case 5:return a=e.sent,e.next=8,I();case 8:for(r=e.sent,c={id:n[0]&&n[0].key.split("_")[0]},i=0;i<n.length;i++)o=n[i].key.substr(n[i].key.indexOf("_")+1),u=n[i].value,c[o]=u;for(s=0;s<a.length;s++)l=a[s].key.replace(t,""),p=a[s].value,c[l]=p;return f=c.reveal_start,m=c.closing_start,c.phase="BID",r>=f&&r<m&&(c.phase="REVEAL",0===c.unrevealed_count&&(c.phase="SETTLE")),r>=m&&(c.phase="SETTLE"),c.deltaReveal=f-r,c.deltaSettle=m-r,e.abrupt("return",c);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(){return(N=Object(m.a)(d.a.mark(function e(){var t,n,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return t=e.sent,n=t.map(function(e){return P(e)}),e.next=6,Promise.all(n);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e){return W.apply(this,arguments)}function W(){return(W=Object(m.a)(d.a.mark(function e(t){var n,a,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:return n=e.sent,a=n.map(function(e){return P(e)}),e.next=6,Promise.all(a);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function F(){return(F=Object(m.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(t).then(function(e){return e.map(function(e){return b({auctionId:e.id,hash:e[e.id+t+"_bid_hash"],deposit:e.deposit||0},e)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(){return(M=Object(m.a)(d.a.mark(function e(t){var n,a,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:return n=e.sent,a=n.map(function(e){return P(e)}),e.next=6,Promise.all(a);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e,t){return z.apply(this,arguments)}function z(){return(z=Object(m.a)(d.a.mark(function e(t,n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={type:3,data:{name:t.name,description:t.imageUrl,quantity:1,precision:0,reissuable:!1,fee:{tokens:"0.001",assetId:"WAVES"}}},e.abrupt("return",n(a).then(JSON.parse));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function V(e){return B.apply(this,arguments)}function B(){return(B=Object(m.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=k("assets/nft/".concat(t,"/limit/100")),e.abrupt("return",g(n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(e){return K.apply(this,arguments)}function K(){return(K=Object(m.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=k("assets/details/".concat(t)),e.abrupt("return",g(n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(e,t){return H.apply(this,arguments)}function H(){return(H=Object(m.a)(d.a.mark(function e(t,n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.startPrice>=t.deposit)){e.next=2;break}throw new Error("start price should NOT be >= deposit");case 2:return a={type:16,data:{fee:{tokens:"0.005",assetId:"WAVES"},dApp:w,call:{function:"startAuction",args:[{type:"integer",value:t.duration},{type:"integer",value:t.startPrice*E},{type:"string",value:t.priceAssetId||"WAVES"},{type:"integer",value:t.deposit*E}]},payment:[{tokens:1,assetId:t.assetId}]}},e.abrupt("return",n(a).then(JSON.parse));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(e){var t=(e*E).toString(),n=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),a=n+t,r=Object(v.stringToBytes)(a),c=Object(v.sha256)(r);return{amount:t,salt:n,hashedAmount:Object(v.base64Encode)(c)}}function Z(e,t){return G.apply(this,arguments)}function G(){return(G=Object(m.a)(d.a.mark(function e(t,n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={type:16,data:{fee:{tokens:.005,assetId:"WAVES"},dApp:w,call:{function:"bid",args:[{type:"string",value:t.auctionId},{type:"string",value:t.hash}]},payment:[{tokens:""+t.deposit/E,assetId:t.priceAssetId||"WAVES"}]}},e.abrupt("return",n(a).then(JSON.parse));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Q(e,t){return X.apply(this,arguments)}function X(){return(X=Object(m.a)(d.a.mark(function e(t,n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={type:16,data:{fee:{tokens:.005,assetId:"WAVES"},dApp:w,call:{function:"reveal",args:[{type:"string",value:t.auctionId},{type:"integer",value:t.amount},{type:"string",value:t.salt}]},payment:[]}},e.abrupt("return",n(a).then(JSON.parse));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Y(e,t){return $.apply(this,arguments)}function $(){return($=Object(m.a)(d.a.mark(function e(t,n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={type:16,data:{fee:{tokens:.005,assetId:"WAVES"},dApp:w,call:{function:"withdraw",args:[{type:"string",value:t}]},payment:[]}},e.abrupt("return",n(a).then(JSON.parse));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ee=function(e){!function t(){window.WavesKeeper?WavesKeeper.initialPromise.then(function(t){e(t)}):setTimeout(t,50)}()},te=n(60),ne=n(496),ae=n(493),re=n(234),ce=n.n(re),ie=function(e){var t=e.children;return r.a.createElement("div",{className:ce.a.section},t)},oe=[{title:"Auction ID",dataIndex:"auctionId"},{title:"Start price",dataIndex:"startPrice"},{title:"Deposit",dataIndex:"deposit"},{title:"My bid",dataIndex:"myBid"},{title:"Status",dataIndex:"status"},{title:"Actions",render:function(e,t){return r.a.createElement(r.a.Fragment,null,"REVEAL"!==t.status||t.alreadyRevealed?"":r.a.createElement(te.a,{onClick:se(t)},"Reveal"),"SETTLE"===t.status?r.a.createElement(te.a,{onClick:ue(t)},"Withdraw"):"")}}],ue=function(e){return function(){ee(function(){var t=Object(m.a)(d.a.mark(function t(n){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e.auctionId,n.signAndPublishTransaction);case 2:a=t.sent,console.info("Created asset: "+a.id+" waiting for tx");case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},se=function(e){return function(){ee(function(){var t=Object(m.a)(d.a.mark(function t(n){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q({auctionId:e.auctionId,salt:e.fullHash.salt,amount:parseInt(e.fullHash.amount)},n.signAndPublishTransaction);case 2:a=t.sent,console.info("Created asset: "+a.id+" waiting for tx");case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},le=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)(function(){ee(function(e){e.publicState().then(function(e){var t=e.account&&e.account.address;t&&function(e){return F.apply(this,arguments)}(t).then(function(e){c(e.map(function(e){var n=JSON.parse(localStorage.getItem("".concat(t,"_").concat(e.auctionId))||"{}"),a=e["".concat(t,"_revealed")],r=e["".concat(t,"_settle")];return{deposit:j(e.deposit),myBid:j(n.amount),auctionId:e.auctionId,fullHash:n,startPrice:j(e.startPrice||0),status:e.phase,alreadyRevealed:a,alreadySettled:r}}).filter(function(e){return!e.alreadySettled}))})})})},[]),r.a.createElement(ie,null,r.a.createElement(ne.a.Title,{level:1},"My bids"),r.a.createElement(ae.a,{columns:oe,dataSource:n,pagination:!1,rowKey:"auctionId"}))},pe=n(9);function fe(e){return de.apply(this,arguments)}function de(){return(de=Object(m.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t.lot_assetId||"").then(function(e){return e.description}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var me=60;function ve(e){return function(e){var t=String(Math.floor(e/60/60)),n=String(Math.floor(e/60)%60);return 1===n.length&&(n="0"+n),"".concat(t,"h ").concat(n,"m ")}(function(e){return e*me}(e))}var he=n(47),be=n.n(he),Ee=function(e){var t=e.item,n=Object(a.useState)(""),c=Object(o.a)(n,2),i=c[0],u=c[1];return Object(a.useEffect)(function(){fe(t).then(function(e){u(e)})},[t]),r.a.createElement("div",{className:be.a.card,onClick:function(){return Object(s.navigate)("/waves/auction/".concat(t.id))}},r.a.createElement("img",{src:i,alt:""}),r.a.createElement(ne.a.Title,{className:be.a.title,level:4},t.id),r.a.createElement("div",{className:be.a.attributes},r.a.createElement("div",null,r.a.createElement(pe.a,{type:"user"})," ",t.organizer),r.a.createElement("div",null,r.a.createElement(pe.a,{type:"clock-circle"}),t.deltaReveal&&t.deltaReveal>0?ve(t.deltaReveal):"Ended"),r.a.createElement("div",null,r.a.createElement(pe.a,{type:"money-collect"})," ",(t.startPrice/E).toFixed(2)," ","WAVES"),r.a.createElement("div",null,r.a.createElement(pe.a,{type:"number"})," ",t.unrevealed_count," bids")))},ye=function(e){return r.a.createElement("div",Object.assign({className:"".concat(be.a.card," ").concat(be.a.add)},e),r.a.createElement(pe.a,{type:"plus"}))},ge=n(122),we=n.n(ge),Oe=function(e){var t=e.auctions;return r.a.createElement("div",{className:we.a.cards},r.a.createElement(ye,{onClick:function(){return Object(s.navigate)("/waves/create/auction")},title:"Create a new auction"}),t.map(function(e){return r.a.createElement(Ee,{key:e.id,item:e})}))},je=function(e){var t=e.lot;return r.a.createElement("div",{className:be.a.card,onClick:function(){return Object(s.navigate)("/waves/lot/".concat(t.id))}},r.a.createElement("img",{src:t.imageUrl,alt:""}),r.a.createElement(ne.a.Text,null,t.id.substr(20,t.id.length)),r.a.createElement(ne.a.Title,{className:be.a.title,level:4},t.name))},ke=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)(function(){ee(function(e){e.publicState().then(function(e){var t=e.account&&e.account.address;t&&V(t).then(function(e){c(e)})})})},[]),r.a.createElement("div",{className:we.a.cards},r.a.createElement(ye,{onClick:function(){return Object(s.navigate)("/waves/create/lot")},title:"Create a new lot"}),n.map(function(e){return r.a.createElement(je,{key:e.id,lot:{name:e.name,imageUrl:e.description,id:e.id}})}))},Se=n(123),Ie=n(124),xe=n(126),Ae=n(125),Ce=n(127),_e=n(94),Te=n(495),Pe=n(497),Re=_e.a.Option,Ne=function(e){function t(e){var n;return Object(Se.a)(this,t),(n=Object(xe.a)(this,Object(Ae.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){e||(console.log("Received values of form: ",t),ee(function(){var e=Object(m.a)(d.a.mark(function e(n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({assetId:t["select-lot"],duration:t.duration,startPrice:t["input-number-start-price"],priceAssetId:"WAVES",deposit:t["input-number-deposit"]},n.signAndPublishTransaction);case 2:a=e.sent,console.info("Created asset: "+a.id+" waiting for tx"),u.a.success({message:"Created asset: "+a.id}),setTimeout(function(){Object(s.navigate)("/waves/auctions")},1e3);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()))})},n.normFile=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},n.state={lots:[]},n}return Object(Ce.a)(t,e),Object(Ie.a)(t,[{key:"componentDidMount",value:function(){var e=this;ee(function(t){t.publicState().then(function(t){var n=t.account&&t.account.address;n&&V(n).then(function(t){e.setState({lots:t})})})})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.lots;return r.a.createElement(ie,null,r.a.createElement(ne.a.Title,null,"Creating an auction"),r.a.createElement(Te.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{onSubmit:this.handleSubmit}),r.a.createElement(Te.a.Item,{label:"Lot",hasFeedback:!0},e("select-lot",{})(r.a.createElement(_e.a,null,t&&Array.isArray(t)&&t.map(function(e){return r.a.createElement(Re,{value:e.id,key:e.id},e.name)}))),r.a.createElement(te.a,{onClick:function(){return Object(s.navigate)("/waves/create/lot")}},"Create Lot")),r.a.createElement(Te.a.Item,{label:"Duration"},e("duration",{})(r.a.createElement(Pe.a,{step:1}))),r.a.createElement(Te.a.Item,{label:"Start price"},e("input-number-start-price",{})(r.a.createElement(Pe.a,{step:.01}))),r.a.createElement(Te.a.Item,{label:"Deposit"},e("input-number-deposit",{})(r.a.createElement(Pe.a,{step:.01}))),r.a.createElement(Te.a.Item,{wrapperCol:{span:12,offset:6}},r.a.createElement(te.a,{type:"primary",htmlType:"submit"},"Save auction"))))}}]),t}(r.a.Component),De=Te.a.create({name:"validate_other"})(Ne),We=n(498),Fe=n(494),Me=function(e){function t(){var e,n;Object(Se.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(xe.a)(this,(e=Object(Ae.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){e||(console.log("Received values of form: ",t),ee(function(){var e=Object(m.a)(d.a.mark(function e(n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L({name:t["input-name"],imageUrl:t.upload[0].response.data.link},n.signAndPublishTransaction);case 2:a=e.sent,console.info("Created asset: "+a.id+" waiting for tx"),u.a.success({message:"Created asset: "+a.id}),setTimeout(function(){Object(s.navigate)("/waves/lots")},1e3);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()))})},n.normFile=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},n}return Object(Ce.a)(t,e),Object(Ie.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(ie,null,r.a.createElement(ne.a.Title,null,"Creating a Lot"),r.a.createElement(Te.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{onSubmit:this.handleSubmit}),r.a.createElement(Te.a.Item,{label:"Lot name"},e("input-name",{})(r.a.createElement(We.a,null))),r.a.createElement(Te.a.Item,{label:"Image for lot"},e("upload",{valuePropName:"fileList",getValueFromEvent:this.normFile})(r.a.createElement(Fe.a,{name:"image",action:"https://api.imgur.com/3/upload",listType:"picture",accept:"image/*",headers:{Authorization:"Client-ID 1650f750334defb"},customRequest:function(e){console.log(e);var t=new FormData;t.append("image",e.file);var n=new XMLHttpRequest;n.addEventListener("readystatechange",function(){if(4===this.readyState){var t=JSON.parse(this.response);console.log(t),e.onSuccess(t)}}),n.onprogress=e.onProgress,n.onerror=e.onError,n.open("POST","https://api.imgur.com/3/image"),n.setRequestHeader("Authorization","Client-ID 1650f750334defb"),n.send(t)}},r.a.createElement(te.a,null,r.a.createElement(pe.a,{type:"upload"})," Click to upload")))),r.a.createElement(Te.a.Item,{wrapperCol:{span:12,offset:6}},r.a.createElement(te.a,{type:"primary",htmlType:"submit"},"Save Lot"))))}}]),t}(r.a.Component),Le=Te.a.create({name:"validate_other"})(Me),ze=[{title:"key",dataIndex:"key"},{title:"value",dataIndex:"value"}],Ve=function(e){var t=e.item,n={"Auction id ":t.id,Phase:t.phase,"Max bid ":j(t.deposit||0),"Amount ":t.lot_amount,"Lot id ":t.lot_assetId,"Organizer address ":t.organizer,"Currency ":t.priceAssetId,"Start bid ":j(t.startPrice||0),"Time left for bids ":t.deltaReveal?t.deltaReveal>0?ve(t.deltaReveal):"Bid phase ended "+-t.deltaReveal+" blocks ago":"?","Second price":t.second_price?j(t.second_price):"Will be known after time left for bids complete","Top price ":t.top_price?j(t.top_price):"Will be known after time left for bids completed","Unrevealed count":t.unrevealed_count,"Time left for reveal bids":t.deltaSettle?t.deltaSettle>0?ve(t.deltaSettle):"Reveal phase ended "+-t.deltaSettle+" blocks ago":"?",Settle:t.settle?"Winner took the prize":"The prize is held by the organizer"},a=Object.entries(n).map(function(e){var t=Object(o.a)(e,2);return{key:t[0],value:t[1]}});return r.a.createElement(ae.a,{columns:ze,dataSource:a,pagination:!1,showHeader:!1})},Be=function(e){var t=e.auction,n=e.state,c=Object(a.useState)(0),i=Object(o.a)(c,2),u=i[0],s=i[1],l=Object(a.useState)(""),p=Object(o.a)(l,2),f=p[0],v=p[1];Object(a.useEffect)(function(){t&&fe(t).then(function(e){v(e)})},[t]);return void 0===t?r.a.createElement(r.a.Fragment,null,"Auction not found"):r.a.createElement(ie,null,r.a.createElement(ne.a.Title,{level:1},t.id),r.a.createElement("img",{src:f,alt:""}),r.a.createElement(Ve,{item:t}),r.a.createElement("br",null),r.a.createElement("br",null),n.account.address===t.organizer&&"BID"!==t.phase?r.a.createElement(r.a.Fragment,null,t.settle?"":r.a.createElement(te.a,{type:"primary",onClick:function(){ee(function(){var e=Object(m.a)(d.a.mark(function e(n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,Y(t.id,n.signAndPublishTransaction);case 3:a=e.sent,console.info("Created asset: "+a.id+" waiting for tx");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}},0!==t.unrevealed_count||t.winner?"Settle":"Refund")):r.a.createElement(r.a.Fragment,null,n.account.address!==t.organizer?r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe.a,{step:.01,value:u,min:0,onChange:function(e){return e&&s(e)}})," ",r.a.createElement(te.a,{type:"primary",onClick:function(){var e=q(u);t&&ee(function(){var n=Object(m.a)(d.a.mark(function n(a){var r;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Z({auctionId:t.id,hash:e.hashedAmount,priceAssetId:t.priceAssetId,deposit:t.deposit||0},a.signAndPublishTransaction);case 2:(r=n.sent)&&a.publicState().then(function(n){var a=n.account&&n.account.address;a&&localStorage.setItem("".concat(a,"_").concat(t.id),JSON.stringify(e))}),console.info("Created asset: "+r.id+" waiting for tx");case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}())}},"Bid")):""))},Je=function(e){var t=e.id,n=Object(a.useState)(),c=Object(o.a)(n,2),i=c[0],u=c[1];return Object(a.useEffect)(function(){ee(function(e){e.publicState().then(function(e){var n=e.account&&e.account.address;n&&V(n).then(function(e){u(e.map(function(e){return{id:e.id,name:e.name,imageUrl:e.description}}).find(function(e){return e.id===t}))})})})},[t]),void 0===i?r.a.createElement(r.a.Fragment,null,"Lot not found"):r.a.createElement(ie,null,r.a.createElement(ne.a.Title,{level:1},i.name),r.a.createElement("img",{src:i.imageUrl,alt:""}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(te.a,{onClick:function(){return Object(s.navigate)("/waves/create/auction")},type:"primary"},"Send to auction"))},Ke=n(492),Ue=n(169),He=function(e){var t=e.state,n=Object(s.usePath)();return r.a.createElement(Ke.a.Header,null,r.a.createElement("div",{style:{float:"left",color:"white",marginRight:20}},"WAVES BIDS"),r.a.createElement(Ue.a,{theme:"dark",mode:"horizontal",selectedKeys:[n],style:{lineHeight:"64px"},onClick:function(e){Object(s.navigate)(e.key)}},r.a.createElement(Ue.a.Item,{key:"/waves/"},"All auctions"),r.a.createElement(Ue.a.SubMenu,{title:"Create"},r.a.createElement(Ue.a.Item,{key:"/waves/create/lot"},"Create lot"),r.a.createElement(Ue.a.Item,{key:"/waves/create/auction"},"Create auction")),r.a.createElement(Ue.a.SubMenu,{title:r.a.createElement("span",{className:"submenu-title-wrapper"},r.a.createElement(pe.a,{type:"user"}),t&&t.account&&t.account.name||"NOT AUTHORIZED"),style:{float:"right"}},r.a.createElement(Ue.a.Item,{key:"/waves/auctions"},"My auctions"),r.a.createElement(Ue.a.Item,{key:"/waves/bids"},"My bids"),r.a.createElement(Ue.a.Item,{key:"/waves/lots"},"My lots"),r.a.createElement(Ue.a.ItemGroup,{title:"Info"},r.a.createElement(Ue.a.Item,{disabled:!0,key:"adress"},t&&t.account&&t.account.address),r.a.createElement(Ue.a.Item,{disabled:!0,key:"balance-available"},"Balance:"," ",t&&t.account&&j(t.account.balance.available)," ","WAVES"),r.a.createElement(Ue.a.Item,{disabled:!0,key:"network"},"Network: ",t&&t.account&&t.account.network)))))},qe=function(e){var t=e.children,n=e.state;return r.a.createElement(Ke.a,{className:"layout"},r.a.createElement(He,{state:n}),r.a.createElement(Ke.a.Content,null,t),r.a.createElement(Ke.a.Footer,null))},Ze=function(){Object(s.useRedirect)("/","/waves/");var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(),l=Object(o.a)(i,2),p=l[0],f=l[1],d=Object(a.useState)(),m=Object(o.a)(d,2),v=m[0],h=m[1];Object(a.useEffect)(function(){new Promise(function(e,t){window.onload=function(){if("undefined"===typeof WavesKeeper)return t("Keeper is not installed!");WavesKeeper.initialPromise.then(function(t){t.publicState().then(function(t){console.log({state:t}),e(t)})})}}).then(function(e){c(e)}).catch(function(e){u.a.error({message:e,description:"You need to install and configure Waves Keeper chrome extension in order to use this site!"})})},[]),Object(a.useEffect)(function(){if(n){if(!n.account)throw new Error("There is no `account` field in `state` object");(function(){return N.apply(this,arguments)})().then(function(e){f(e)})}},[n]),Object(a.useEffect)(function(){if(n){if(!n.account)throw new Error("There is no `account` field in `state` object");(function(e){return M.apply(this,arguments)})(n.account.address).then(function(e){h(e)})}},[n]);var b={"/waves/":function(){return r.a.createElement(Oe,{auctions:p&&p.filter(function(e){return"BID"===e.phase})||[]})},"/waves/auctions":function(){return r.a.createElement(Oe,{auctions:v&&v.filter(function(e){return!e.settle})||[]})},"/waves/lots":function(){return r.a.createElement(ke,null)},"/waves/bids":function(){return r.a.createElement(le,null)},"/waves/create/lot":function(){return r.a.createElement(Le,null)},"/waves/create/auction":function(){return r.a.createElement(De,null)},"/waves/auction/:id":function(e){var t=e.id;return p&&r.a.createElement(Be,{state:n,auction:p.find(function(e){return e.id===t})})},"/waves/lot/:id":function(e){var t=e.id;return r.a.createElement(Je,{id:t})}},E=Object(s.useRoutes)(b);return r.a.createElement(qe,{state:n},E||"404. Page not found")};i.a.render(r.a.createElement(Ze,null),document.getElementById("root"))}},[[252,1,2]]]);
//# sourceMappingURL=main.85d3a650.chunk.js.map